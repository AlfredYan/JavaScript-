# JavaScript作用域及闭包

## 编译

**分词/词法分析：** 将有意义的字符串分解成有意义的代码块（词法单元）。例如：var a = 2; 会被分解成：var、a、=、2、;。空格是否被当做词法单元，取决于空格在这门语言中是否有意义。

**解析/语法分析：** 将词法单元流转换成“抽象语法树”（AST）。

**代码生成：** 将AST转换为可 执行代码。

对于JavaScript来说，编译发生在代码执行前的几微秒。

## 作用域

**LHS：** 赋值操作的左侧。寻找变量的容器本身，从而可以对其赋值，不成功的LHS会自动隐式地创建一个全局变量。（var a = 2;）

**RHS：** 赋值操作的非左侧。查找某个变量的值。不成功的RHS会抛出ReferencError。（console.log(a)）

**变量的赋值操作：** 首先编译器会在当前作用域中声明一个变量（如果之前没有声明过），然后在运行时引擎会在作用域中进行LHS查找该变量，如果找到则对它赋值。